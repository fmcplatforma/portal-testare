<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Test Simplu – înscriere în Google Sheet</title>
<style>
body{font:16px/1.4 Arial;padding:2rem;max-width:500px;margin:auto}
label{display:block;margin-top:1rem}input{width:100%;padding:.4rem}
button{margin-top:1.5rem;padding:.6rem 1.2rem}
</style>
</head>
<body>

<h2>Formular Test (sheet „FormData”)</h2>

<form id="simpleForm" autocomplete="off">
  <label>Organizație
    <input name="organization" required>
  </label>
  <label>Nume
    <input name="lastName" required>
  </label>
  <label>Prenume
    <input name="firstName" required>
  </label>
  <label>Funcție
    <input name="position" required>
  </label>
  <label>Data
    <input type="date" name="date" required>
  </label>
  <label>Titlu test
    <input name="quizTitle" value="Chestionar de Evaluare GDPR" required>
  </label>
  <label>Punctaj
    <input name="score" type="number" value="88" required>
  </label>
  <label>Calificativ
    <input name="grade" value="Bine" required>
  </label>

  <button type="submit">Trimite în Sheet</button>
</form>

<script>
/* ---------- pune aici URL‑ul din Deploy → Web app (termină în /exec) ---------- */
const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwJtq9ETpvLLJX-1Ti90PGgacPnbKhrudTm4-AaGSPmmNiibs8sm-2B-uw3TRXC4mCJcA/exec';
/* ----------------------------------------------------------------------------- */

document.getElementById('simpleForm').addEventListener('submit', async (e)=>{
  e.preventDefault();

  const payload = Object.fromEntries(new FormData(e.target));
  try{
    const r = await fetch(WEB_APP_URL,{
      method : 'POST',
      headers: { 'Content-Type':'application/json' }, // declanșează OPTIONS, corpul ajunge
      body   : JSON.stringify(payload)
    });
    if(!r.ok) throw new Error(await r.text());
    alert('✔ Rând adăugat!');
  }catch(err){
    console.error(err);
    alert('❌ Eroare: ' + err.message);
  }
});
</script>
</body>
</html>
